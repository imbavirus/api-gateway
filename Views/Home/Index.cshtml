@using Microsoft.AspNetCore.Mvc.Razor;
@using ApiGateway.Models;

@{
    ViewData["Title"] = "Home Page";  // This sets the title in the layout
    ApiRequest apiRequest1 = new ApiRequest() { // Assuming ApiRequest is a model class defined in your project
        StatusCode = 101, // Default status code
        Endpoint = "testdata", // Assuming Request is a nested class in ApiRequest
        Time = DateTime.Now // Assuming time is a property in Request
    };
    ApiRequest apiRequest2 = new ApiRequest() { // Assuming ApiRequest is a model class defined in your project
        StatusCode = 202, // Default status code
        Endpoint = "testdata", // Assuming Request is a nested class in ApiRequest
        Time = DateTime.Now // Assuming time is a property in Request
    };
    ApiRequest apiRequest3 = new ApiRequest() { // Assuming ApiRequest is a model class defined in your project
        StatusCode = 303, // Default status code
        Endpoint = "testdata", // Assuming Request is a nested class in ApiRequest
        Time = DateTime.Now // Assuming time is a property in Request
    };
    ApiRequest apiRequest4 = new ApiRequest() { // Assuming ApiRequest is a model class defined in your project
        StatusCode = 404, // Default status code
        Endpoint = "testdata", // Assuming Request is a nested class in ApiRequest
        Time = DateTime.Now // Assuming time is a property in Request
    };
    ApiRequest apiRequest5 = new ApiRequest() { // Assuming ApiRequest is a model class defined in your project
        StatusCode = 505, // Default status code
        Endpoint = "testdata", // Assuming Request is a nested class in ApiRequest
        Time = DateTime.Now // Assuming time is a property in Request
    };
    ApiRequest apiRequest6 = new ApiRequest() { // Assuming ApiRequest is a model class defined in your project
        StatusCode = 606, // Default status code
        Endpoint = "sgaf", // Assuming Request is a nested class in ApiRequest
        Time = DateTime.Now // Assuming time is a property in Request
    };

    List<ApiRequest> data = new List<ApiRequest>(); // Initialize the list of API responses
    data.Add(apiRequest1); // Add the first API response to the list
    data.Add(apiRequest2); // Add the second API response to the list
    data.Add(apiRequest3); // Add the third API response to the list
    data.Add(apiRequest4); // Add the fourth API response to the list
    data.Add(apiRequest5); // Add the fifth API response to the list
    data.Add(apiRequest6); // Add the sixth API response to the list

    string GetStatusColorClass(int statusCode)
    {
        switch (statusCode.ToString()[0])
        {
            case '1':
                return "table-info"; // Blue for informational responses
            case '2':
                return "table-success"; // Green for success
            case '3':
                return "table-warning"; // Yellow/Orange for redirection (Bootstrap uses warning for this)
            case '4':
            case '5':
                return "table-danger"; // Red for client/server error
            default:
                return "table-secondary"; // Grey for others
        }
    }
}

<div class="text-center">
    <h1 class="display-4">API Calls:</h1>
    <p>Below are all the calls being made to the api.</p>
    <table class="table table-fixed table-dark table-striped text-start">
        <thead>
            <tr>
                <th scope="col">Status Code</th>
                <th scope="col" colspan="7">Request</th>
                <th scope="col">Time</th>
            </tr>
        </thead>
        <tbody>
            @if (data != null && data.Any())
            {
                @foreach (var item in data)
                {
                    <tr class="@GetStatusColorClass(item.StatusCode)">
                        <th scope="row">@item.StatusCode</th>
                        <td colspan="7">@item.Endpoint</td> 
                        <td>@item.Time.ToString("yyyy-MM-dd HH:mm:ss")</td>
                    </tr>
                }
            }
            else
            {
                <tr>
                    <td colspan="9" class="text-center">No API calls have been made.</td> 
                </tr>
            }
        </tbody>
    </table>
</div>
